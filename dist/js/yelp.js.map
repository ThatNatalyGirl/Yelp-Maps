{"version":3,"sources":["yelp.js"],"names":["console","log","yelpLatLong","YelpModule","API_KEY","termEl","document","getElementById","locationEl","searchBtn","resultsEl","addEventListener","e","preventDefault","queryTerm","value","location","prices","getCheckedValues","querySelectorAll","searchYelp","checkedItems","checkedValues","map","checkedItem","allChecked","join","displayArticle","currentBusiness","title","name","thumbnail","image_url","currentBusinessLocation","url","liEl","createElement","linkEl","imgEl","pAddressEl","p$El","pRatingEl","pEl","createTextNode","href","src","innerHTML","address1","city","state","zip_code","price","rating","appendChild","push","coordinates","displayArticles","articleArray","length","i","tempArrayElement","options","searchParams","Object","assign","axios","get","params","headers","then","response","data","businesses","search"],"mappings":"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","file":"yelp.js","sourcesContent":["console.log('Top test')\n\nvar yelpLatLong = [];\n\nvar YelpModule = (function() {\n\n\tconst API_KEY = 'xICUj5FsqM8P6cfNhFQEYwtYzrv75F4WEqj-Hns-fUTZgyLOzQBVyr01f9g3p-5P3J9S7LkrGhLEWjqi7t_ZHoZedrj9zV1E34GIIu1nLLF814cws_futxGtRGPiWnYx';\n\n\tconst termEl = document.getElementById('term');\n\tconst locationEl = document.getElementById('location');\n\tconst searchBtn = document.getElementById('search');\n\tconst resultsEl = document.getElementById('results');\n\n\tsearchBtn.addEventListener('click', function(e) {\n\t\te.preventDefault();\n\t\tconst queryTerm = termEl.value;\n\t\tconst location = locationEl.value;\n\t\tconst prices = getCheckedValues(document.querySelectorAll('[name=price]:checked'));\n\t\tconsole.log('queryTerm', queryTerm);\n\t\tconsole.log('prices', prices);\n\t\tsearchYelp({\n\t\t\t'location': location, \n\t\t\t'term': queryTerm, \n\t\t\t'price': prices\n\t\t});\n\t})\n\n\tfunction getCheckedValues(checkedItems) {\n\t\tconsole.log('checkedItems', checkedItems)\n\t\t// Option 1: the old-school JS way\n\t\t// let allChecked = '';\n\t\t// for (var i = checkedItems.length - 1; i >= 0; i--) {\n\t\t// \tvar checkedItem = checkedItems[i].value\n\t\t// \tconsole.log('checkedItem', checkedItem)\n\t\t// \tallChecked = allChecked + ',' + checkedItem\n\t\t// }\n\t\t// End Option 1;\n\t\t// Option 2: the ES6 way\n\t\tconst checkedValues = [...checkedItems].map(function(checkedItem) {\n\t\t\treturn checkedItem.value;\n\t\t});\n\t\tconst allChecked = checkedValues.join(',');\n\t\t// end Option 2\n\t\tconsole.log('allChecked', allChecked);\n\t\t// \n\t\treturn allChecked\n\t}\n\n\tfunction displayArticle(currentBusiness) {\n\t\tconst title = currentBusiness.name;\n\t\t// pick any kind of default fallback image\n\t\tlet thumbnail = currentBusiness.image_url;\n\t\tconst currentBusinessLocation = currentBusiness.location;\n\t\tconst url = currentBusiness.url;\n\n\t\tconst liEl = document.createElement('li');\n\t\tconst linkEl = document.createElement('a');\n\t\tconst imgEl = document.createElement('img');\n\t\t//ask about how to define mutliple var at the same time\n\t\tlet pAddressEl = document.createElement('p');\n\t\tlet p$El = document.createElement('p');\n\t\tlet pRatingEl = document.createElement('p');\n\n\t\tconst pEl = document.createTextNode(title);\n\t\tlinkEl.href = url;\n\t\timgEl.src = thumbnail;\n\n\t\tpAddressEl.innerHTML = currentBusinessLocation.address1 + \"<br/>\" + currentBusinessLocation.city + \", \" + currentBusinessLocation.state + \" \" + currentBusinessLocation.zip_code; \n\t\tp$El.innerHTML = currentBusiness.price;\n\t\tpRatingEl.innerHTML = \"Rating \" + currentBusiness.rating;\n\n\t\tliEl.appendChild(linkEl);\n\t\tlinkEl.appendChild(pEl);\n\t\tlinkEl.appendChild(imgEl);\n\t\tliEl.appendChild(pAddressEl);\n\t\tliEl.appendChild(p$El);\n\t\tliEl.appendChild(pRatingEl);\n\n\t\tresultsEl.appendChild(liEl);\n\n\t\tyelpLatLong.push(currentBusiness.coordinates);\n\n\t}\n\n\tfunction displayArticles(articleArray) {\n\t\tconsole.log(\"HeyO\");\n\t\tconsole.log(articleArray.length);\n\t\tif (articleArray.length) {\n\t\t\tresultsEl.innerHTML = '';\n\t\t\tfor (var i = 0; i <= articleArray.length - 1; i++) {\n\t\t\tvar tempArrayElement = articleArray[i];\t\t\t\n\t\t\tdisplayArticle(tempArrayElement);\n\t\t\t}\n\t\t\t// now add the new results\t\n\t\t\tconsole.log(\"Here I am\")\t\t\n\t\t}\t\n\n\n\t}\n\n\t// we no longer need these as individual parameters:\n\t// location, queryTerm, prices, rating, option1, option2\n\t/* options is an {}\n\twhich could look something like:\n\t\n\toptions = {\n\t\tlocation: location,\n\t\tqueryTerm: queryTerm,\n\t\tprices: prices,\n\t\t// etc\n\t}\n\t*/\n\tfunction searchYelp(options) {\n\n\t\tconst searchParams = Object.assign({}, options, {\n\t\t\t'_ep': '/businesses/search',\n\t\t})\n\t\t// then ask Chris about the new ES6 way:\n\t\t// const searchParams = {...options, '_ep': '/businesses/search'}\n\n\t\tconsole.log('searchParams', searchParams)\n\n\t\taxios.get('https://circuslabs.net/proxies/yelp-fusion-proxy/', {\n\t\t\tparams: searchParams,\n\t\t\theaders: {\n\t\t\t\t'Authorization': 'Bearer ' + API_KEY\n\t\t\t}\n\t\t})\n\t\t.then(function (response) {\n\t\t\tconsole.log('here is the get response data for key:', response.data, response);\n\t\t\tconsole.log(response.data.businesses)\n\t\t\tdisplayArticles(response.data.businesses);\n\n\t\t})\n\t\t// .catch(function (error) {\n\t\t// \tconsole.warn('axios encountered an error!', error);\n\t\t// \t//valueEl.value = 'UNDEFINED'\n\t\t// }); \n\t}\n\n\t// function posting() {\n\t\n\t// \t// make a GET request\n\t// \t// axios.get(\"file:///Users/natalyg/Documents/Classes/3rd Quarter/AJAX/YelpMaps/index.html\")\n\t// \t\tvar key = 'cat'\n\t// \t \t//we are changing get to post - this is making the call. Once the call is made we move to '.then'\n\t// \t \taxios.post(\"http://localhost:3000/\", yelpLatLong)\n\t// \t \t//.then is part of the promise api that js is using to talk to the browser\n\t// \t \t//we are passing a function in it with a given parameter\n\t// \t \t.then(function(response){\n\t// \t \t\t//we add the .data bc it is a list in the value that you get when you look for response in the console. You can call all the things in that list to get the info listed for you directly in the console. \n\t// \t \t\tconsole.log('here is the response data for key', response);\n\t// \t \t})\n\t// \t \t//this catch is recommended to have (not neccessary). It catches all in case there's an issue. It lets us tell the user to do something Like try again in five seconds or refresh\n\t// \t \t.catch(function(error) {\n\t// \t \t\tconsole.warn('.axios encountered an error!', error)\n\t// \t \t});\n\n\t// }\n\n\t// posting();\n\n\n\treturn {\n\t\tsearch: searchYelp,\n\t}\n\n})(); \n\n\n"]}